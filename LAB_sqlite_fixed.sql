-- Очистка существующих таблиц
DROP TABLE IF EXISTS Ratings;
DROP TABLE IF EXISTS User_Preferences;
DROP TABLE IF EXISTS Menu_Dishes;
DROP TABLE IF EXISTS Menus;
DROP TABLE IF EXISTS Dish_Ingredients;
DROP TABLE IF EXISTS Dish_Categories;
DROP TABLE IF EXISTS Dishes;
DROP TABLE IF EXISTS Preference_Types;
DROP TABLE IF EXISTS Units;
DROP TABLE IF EXISTS Ingredients;
DROP TABLE IF EXISTS Categories;
DROP TABLE IF EXISTS Users;

-- Создание таблиц
CREATE TABLE Users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Categories (
    category_id INTEGER PRIMARY KEY AUTOINCREMENT,
    category_name TEXT NOT NULL UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Ingredients (
    ingredient_id INTEGER PRIMARY KEY AUTOINCREMENT,
    ingredient_name TEXT NOT NULL UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Units (
    unit_id INTEGER PRIMARY KEY AUTOINCREMENT,
    unit_name TEXT UNIQUE NOT NULL
);

CREATE TABLE Preference_Types (
    preference_type_id INTEGER PRIMARY KEY AUTOINCREMENT,
    type_name TEXT NOT NULL UNIQUE
);

CREATE TABLE Dishes (
    dish_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER REFERENCES Users(user_id),
    dish_name TEXT NOT NULL,
    description TEXT,
    recipe TEXT NOT NULL,
    calories INTEGER CHECK (calories >= 0),
    cooking_time INTEGER CHECK (cooking_time >= 0), -- в минутах
    difficulty TEXT CHECK (difficulty IN ('Легко', 'Средне', 'Сложно')),
    is_public BOOLEAN DEFAULT FALSE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Dish_Categories (
    dish_id INTEGER REFERENCES Dishes(dish_id),
    category_id INTEGER REFERENCES Categories(category_id),
    PRIMARY KEY (dish_id, category_id)
);

CREATE TABLE Dish_Ingredients (
    dish_id INTEGER REFERENCES Dishes(dish_id),
    ingredient_id INTEGER REFERENCES Ingredients(ingredient_id),
    quantity NUMERIC,
    unit_id INTEGER REFERENCES Units(unit_id),
    PRIMARY KEY (dish_id, ingredient_id)
);

CREATE TABLE Menus (
    menu_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER REFERENCES Users(user_id) NOT NULL,
    menu_name TEXT NOT NULL,
    description TEXT,
    is_public BOOLEAN DEFAULT FALSE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Menu_Dishes (
    menu_id INTEGER REFERENCES Menus(menu_id),
    dish_id INTEGER REFERENCES Dishes(dish_id),
    position INTEGER,
    PRIMARY KEY (menu_id, dish_id)
);

CREATE TABLE User_Preferences (
    user_id INTEGER REFERENCES Users(user_id),
    preference_type_id INTEGER REFERENCES Preference_Types(preference_type_id),
    PRIMARY KEY (user_id, preference_type_id)
);

CREATE TABLE Ratings (
    rating_id INTEGER PRIMARY KEY AUTOINCREMENT,
    dish_id INTEGER REFERENCES Dishes(dish_id),
    user_id INTEGER REFERENCES Users(user_id),
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (dish_id, user_id)
);

-- Индексы
CREATE INDEX idx_dishes_name ON Dishes(dish_name);
CREATE INDEX idx_dish_categories_dish ON Dish_Categories(dish_id);
CREATE INDEX idx_dish_ingredients_dish ON Dish_Ingredients(dish_id);

-- Добавление тестового пользователя
INSERT INTO Users (username, email, password_hash) VALUES
('testuser', 'test@example.com', 'hashed_password');

-- Проверка наличия пользователя
-- Removed unsupported DO block

-- Заполнение Categories
INSERT INTO Categories (category_name) VALUES
('Супы'), ('Салаты'), ('Основные блюда'), ('Десерты'), ('Закуски'),
('Выпечка'), ('Напитки'), ('Гарниры'), ('Соусы'), ('Завтраки');

-- Заполнение Units
INSERT INTO Units (unit_name) VALUES
('грамм'), ('стакан'), ('ложка'), ('килограмм'), ('литр');

-- Заполнение Ingredients
INSERT INTO Ingredients (ingredient_name) VALUES
('Мука'), ('Сахар'), ('Соль'), ('Масло сливочное'), ('Масло растительное'),
('Яйца'), ('Молоко'), ('Свекла'), ('Капуста'), ('Картофель'),
('Морковь'), ('Лук'), ('Чеснок'), ('Томаты'), ('Говядина'),
('Курица'), ('Рыба'), ('Свинина'), ('Рис'), ('Паста'),
('Сыр'), ('Сметана'), ('Майонез'), ('Уксус'), ('Мед'),
('Лимон'), ('Зелень'), ('Огурцы'), ('Помидоры'), ('Листья салата'),
('Креветки'), ('Авокадо'), ('Бекон'), ('Пармезан'), ('Крутоны'),
('Маскарпоне'), ('Кофе'), ('Печенье савоярди'), ('Какао'), ('Сливки'),
('Грибы'), ('Перец'), ('Базилик'), ('Орегано'), ('Тесто'),
('Дрожжи'), ('Яблоки'), ('Шоколад'), ('Ваниль'), ('Корица');

-- Проверка уникальности dish_name
-- Removed unsupported DO block

-- Заполнение Dishes (100 блюд, часть 1: первые 50)
INSERT INTO Dishes (user_id, dish_name, description, recipe, calories, cooking_time, difficulty, is_public) VALUES
(1, 'Борщ', 'Традиционный украинский суп с говядиной и свеклой', 'Сварить бульон из говядины, добавить нарезанные свеклу, капусту, картофель, морковь, лук. Тушить томаты с чесноком, добавить в суп. Варить 40 минут, подавать со сметаной.', 250, 60, 'Средне', TRUE),
(1, 'Салат Цезарь', 'Классический салат с курицей и крутонами', 'Обжарить курицу, нарезать листья салата, добавить крутоны, пармезан. Смешать соус из майонеза, чеснока, лимона, анчоусов. Заправить салат.', 350, 20, 'Легко', TRUE),
(1, 'Спагетти карбонара', 'Итальянская паста с беконом и сыром', 'Сварить спагетти. Обжарить бекон, смешать с яйцами и пармезаном. Добавить пасту, перемешать, подавать сразу.', 600, 15, 'Средне', TRUE),
(1, 'Тирамису', 'Итальянский десерт с маскарпоне и кофе', 'Смешать маскарпоне с сахаром и сливками. Обмакнуть печенье савоярди в кофе, выложить слоями с кремом. Посыпать какао, охладить 4 часа.', 400, 30, 'Средне', TRUE),
(1, 'Оливье', 'Русский салат с картофелем и майонезом', 'Отварить картофель, морковь, яйца, нарезать кубиками. Добавить огурцы, горошек, колбасу, заправить майонезом.', 300, 25, 'Легко', TRUE),
(1, 'Грибной суп', 'Суп с шампиньонами и сливками', 'Обжарить грибы с луком, добавить картофель и воду, варить 20 минут. Влить сливки, посолить, подавать с зеленью.', 200, 30, 'Легко', TRUE),
(1, 'Пельмени', 'Сибирские пельмени с мясом', 'Замесить тесто, приготовить фарш из говядины и лука. Сформировать пельмени, варить 7 минут. Подавать со сметаной.', 450, 40, 'Средне', TRUE),
(1, 'Чизкейк', 'Десерт с сырным кремом и печеньем', 'Измельчить печенье, смешать с маслом для основы. Смешать маскарпоне, сахар, яйца, вылить на основу. Выпекать 50 минут, охладить.', 500, 60, 'Средне', TRUE),
(1, 'Греческий салат', 'Салат с огурцами, помидорами и фетой', 'Нарезать огурцы, помидоры, лук, добавить оливки, фету. Заправить оливковым маслом, лимоном, орегано.', 200, 15, 'Легко', TRUE),
(1, 'Лазанья', 'Итальянское блюдо с мясом и сыром', 'Приготовить мясной соус из говядины, томатов, лука. Собрать слои из листов лазаньи, соуса, сыра. Выпекать 40 минут.', 550, 60, 'Сложно', TRUE),
(1, 'Щи', 'Русский капустный суп', 'Сварить бульон, добавить капусту, картофель, морковь, лук. Варить 30 минут, подавать со сметаной.', 180, 40, 'Легко', TRUE),
(1, 'Котлеты', 'Жареные мясные котлеты', 'Смешать фарш, лук, яйцо, хлебные крошки. Сформировать котлеты, обжарить на масле 10 минут.', 400, 20, 'Средне', TRUE),
(1, 'Панкейки', 'Американские блинчики с сиропом', 'Смешать муку, молоко, яйца, сахар. Жарить на сковороде по 2 минуты с каждой стороны. Подавать с сиропом.', 300, 15, 'Легко', TRUE),
(1, 'Шарлотка', 'Яблочный пирог', 'Смешать муку, сахар, яйца. Нарезать яблоки, выложить в форму, залить тестом. Выпекать 40 минут.', 250, 50, 'Легко', TRUE),
(1, 'Рататуй', 'Овощное рагу из Франции', 'Нарезать баклажаны, кабачки, томаты. Выложить в форму, полить соусом из томатов и перца. Запекать 40 минут.', 150, 50, 'Средне', TRUE),
(1, 'Суши', 'Японские роллы с рыбой', 'Сварить рис, смешать с уксусом. Завернуть рис, рыбу, огурец в нори. Нарезать роллы, подавать с соевым соусом.', 200, 30, 'Сложно', TRUE),
(1, 'Том Ям', 'Тайский острый суп с креветками', 'Сварить бульон, добавить пасту чили, лемонграсс, креветки, грибы. Варить 10 минут, добавить кокосовое молоко.', 250, 20, 'Средне', TRUE),
(1, 'Блины', 'Тонкие русские блинчики', 'Смешать муку, молоко, яйца, сахар. Жарить тонкие блины на сковороде. Подавать с медом или вареньем.', 200, 20, 'Легко', TRUE),
(1, 'Пицца Маргарита', 'Классическая пицца с томатами и базиликом', 'Замесить тесто, раскатать. Смазать томатным соусом, добавить моцареллу, базилик. Выпекать 15 минут.', 400, 30, 'Средне', TRUE),
(1, 'Картошка фри', 'Жареный картофель', 'Нарезать картофель брусками, обжарить во фритюре 5 минут. Посолить, подавать с соусом.', 300, 15, 'Легко', TRUE),
(1, 'Бефстроганов', 'Говядина в сливочном соусе', 'Нарезать говядину, обжарить с луком. Добавить сметану, горчицу, тушить 20 минут. Подавать с рисом.', 450, 30, 'Средне', TRUE),
(1, 'Эклеры', 'Французские пирожные с кремом', 'Сварить заварное тесто, выпечь эклеры. Наполнить кремом из сливок и ванили, покрыть шоколадом.', 350, 60, 'Сложно', TRUE),
(1, 'Салат с тунцом', 'Салат с консервированным тунцом', 'Смешать тунец, листья салата, огурцы, помидоры. Заправить оливковым маслом и лимоном.', 200, 10, 'Легко', TRUE),
(1, 'Гуляш', 'Венгерское мясное рагу', 'Обжарить говядину с луком, добавить паприку, томаты, тушить 1 час. Подавать с картофелем.', 400, 70, 'Средне', TRUE),
(1, 'Крем-брюле', 'Французский десерт с карамельной корочкой', 'Смешать сливки, сахар, ваниль, яйца. Запечь, посыпать сахаром, карамелизировать горелкой.', 300, 50, 'Сложно', TRUE),
(1, 'Окрошка', 'Холодный суп на квасе', 'Нарезать картофель, яйца, огурцы, колбасу. Смешать с квасом, сметаной, зеленью.', 150, 20, 'Легко', TRUE),
(1, 'Ризотто', 'Итальянское блюдо с рисом и грибами', 'Обжарить рис с луком, постепенно добавлять бульон. Добавить грибы, пармезан, перемешать.', 350, 30, 'Средне', TRUE),
(1, 'Тартар', 'Сырое мясо с приправами', 'Измельчить говядину, смешать с луком, каперсами, горчицей, яйцом. Подавать с тостами.', 250, 15, 'Сложно', TRUE),
(1, 'Мусс шоколадный', 'Воздушный шоколадный десерт', 'Растопить шоколад, смешать со взбитыми сливками. Охладить 2 часа, подавать с ягодами.', 300, 20, 'Средне', TRUE),
(1, 'Куриный суп', 'Легкий суп с лапшой', 'Сварить бульон из курицы, добавить лапшу, морковь, лук. Варить 20 минут, посыпать зеленью.', 150, 30, 'Легко', TRUE),
(1, 'Брауни', 'Шоколадный пирог', 'Смешать муку, сахар, яйца, шоколад, масло. Выпекать 25 минут, нарезать квадратами.', 400, 40, 'Легко', TRUE),
(1, 'Салат с авокадо', 'Салат с креветками и авокадо', 'Нарезать авокадо, креветки, листья салата. Заправить лимоном, оливковым маслом.', 250, 15, 'Легко', TRUE),
(1, 'Паэлья', 'Испанское блюдо с рисом и морепродуктами', 'Обжарить рис, креветки, мидии, курицу с перцем. Добавить шафран, бульон, тушить 20 минут.', 450, 40, 'Сложно', TRUE),
(1, 'Сырники', 'Творожные оладьи', 'Смешать творог, яйца, муку, сахар. Сформировать сырники, обжарить по 3 минуты с каждой стороны.', 300, 20, 'Легко', TRUE),
(1, 'Гаспачо', 'Холодный томатный суп', 'Измельчить томаты, огурцы, перец, лук, чеснок. Смешать с оливковым маслом, уксусом, охладить.', 100, 15, 'Легко', TRUE),
(1, 'Киш', 'Французский пирог с начинкой', 'Замесить тесто, выложить в форму. Смешать яйца, сливки, бекон, сыр, запечь 40 минут.', 400, 50, 'Средне', TRUE),
(1, 'Фалафель', 'Жареные шарики из нута', 'Измельчить нут, лук, зелень, специи. Сформировать шарики, обжарить во фритюре 5 минут.', 300, 20, 'Средне', TRUE),
(1, 'Торт Наполеон', 'Слоеный торт с кремом', 'Выпечь слоеные коржи, смазать заварным кремом. Охладить 4 часа, нарезать.', 500, 90, 'Сложно', TRUE),
(1, 'Жульен', 'Грибная закуска с сыром', 'Обжарить грибы с луком, добавить сливки, сыр. Запечь в кокотницах 10 минут.', 350, 20, 'Средне', TRUE),
(1, 'Капрезе', 'Итальянский салат с томатами и моцареллой', 'Нарезать томаты, моцареллу, базилик. Полить оливковым маслом, бальзамиком.', 200, 10, 'Легко', TRUE),
(1, 'Хумус', 'Паста из нута с тахини', 'Измельчить нут, тахини, чеснок, лимон, оливковое масло. Подавать с питой.', 250, 15, 'Легко', TRUE),
(1, 'Борщ зеленый', 'Суп со щавелем', 'Сварить бульон, добавить щавель, картофель, яйца. Варить 20 минут, подавать со сметаной.', 150, 30, 'Легко', TRUE),
(1, 'Омлет', 'Яичное блюдо с начинкой', 'Взбить яйца, добавить сыр, помидоры. Жарить на сковороде 5 минут.', 200, 10, 'Легко', TRUE),
(1, 'Кекс', 'Простой ванильный кекс', 'Смешать муку, сахар, яйца, масло, ваниль. Выпекать 40 минут.', 350, 50, 'Легко', TRUE),
(1, 'Рагу', 'Овощное блюдо с мясом', 'Обжарить говядину, добавить картофель, морковь, томаты. Тушить 1 час.', 400, 70, 'Средне', TRUE),
(1, 'Макароны по-флотски', 'Паста с мясом', 'Сварить макароны, обжарить фарш с луком. Смешать, подавать с сыром.', 450, 20, 'Легко', TRUE),
(1, 'Пудинг', 'Молочный десерт', 'Смешать молоко, сахар, крахмал, ваниль. Варить до загустения, охладить.', 250, 20, 'Легко', TRUE),
(1, 'Салат с кальмарами', 'Морской салат', 'Отварить кальмары, нарезать с огурцами, яйцами. Заправить майонезом.', 200, 15, 'Легко', TRUE),
(1, 'Голубцы', 'Капуста с мясной начинкой', 'Завернуть фарш с рисом в капустные листья. Тушить в томатном соусе 40 минут.', 350, 60, 'Средне', TRUE),
(1, 'Пирожки', 'Печеные пирожки с начинкой', 'Замесить тесто, начинить мясом или капустой. Выпекать 20 минут.', 300, 40, 'Средне', TRUE);

-- Проверка первой части вставки в Dishes
-- Removed unsupported DO block

-- Заполнение Dishes (100 блюд, часть 2: оставшиеся 50)
INSERT INTO Dishes (user_id, dish_name, description, recipe, calories, cooking_time, difficulty, is_public) VALUES
(1, 'Смузи', 'Фруктовый напиток', 'Измельчить банан, ягоды, йогурт в блендере. Подавать охлажденным.', 150, 5, 'Легко', TRUE),
(1, 'Тефтели', 'Мясные шарики в соусе', 'Смешать фарш, рис, яйцо. Сформировать тефтели, тушить в томатном соусе 30 минут.', 400, 40, 'Средне', TRUE),
(1, 'Минтай жареный', 'Рыба в панировке', 'Обвалять минтай в муке, обжарить на масле 10 минут. Подавать с лимоном.', 300, 15, 'Легко', TRUE),
(1, 'Крокеты', 'Жареные шарики с начинкой', 'Смешать картофельное пюре, сыр, обвалять в панировке, обжарить 5 минут.', 350, 20, 'Средне', TRUE),
(1, 'Салат с курицей', 'Салат с жареной курицей', 'Обжарить курицу, смешать с листьями салата, помидорами, заправить майонезом.', 250, 20, 'Легко', TRUE),
(1, 'Медовик', 'Торт с медовыми коржами', 'Выпечь медовые коржи, смазать сметанным кремом. Охладить 4 часа.', 450, 90, 'Сложно', TRUE),
(1, 'Уха', 'Рыбный суп', 'Сварить бульон из рыбы, добавить картофель, морковь, лук. Варить 20 минут.', 150, 30, 'Легко', TRUE),
(1, 'Клубничный тарт', 'Десерт с ягодами', 'Выпечь песочное тесто, наполнить заварным кремом, украсить клубникой.', 350, 60, 'Средне', TRUE),
(1, 'Карри', 'Индийское блюдо с рисом', 'Обжарить курицу с луком, добавить карри, кокосовое молоко. Тушить 20 минут, подавать с рисом.', 400, 30, 'Средне', TRUE),
(1, 'Бутерброды', 'Закуски с сыром и колбасой', 'Намазать хлеб маслом, выложить сыр, колбасу, помидоры. Подавать сразу.', 300, 10, 'Легко', TRUE),
(1, 'Плов', 'Узбекское блюдо с рисом', 'Обжарить мясо с морковью, луком, добавить рис, специи, тушить 40 минут.', 450, 50, 'Средне', TRUE),
(1, 'Профитроли', 'Пирожные с кремом', 'Выпечь заварное тесто, наполнить кремом из сливок. Полить шоколадом.', 350, 60, 'Сложно', TRUE),
(1, 'Салат с сыром', 'Салат с фетой и овощами', 'Нарезать огурцы, помидоры, фету, добавить оливковое масло, орегано.', 200, 10, 'Легко', TRUE),
(1, 'Луковый суп', 'Французский суп с сыром', 'Карамелизировать лук, добавить бульон, варить 20 минут. Запечь с сыром.', 250, 40, 'Средне', TRUE),
(1, 'Запеканка', 'Творожное блюдо', 'Смешать творог, яйца, сахар, манку. Запечь 40 минут.', 300, 50, 'Легко', TRUE),
(1, 'Кебаб', 'Жареное мясо на шампуре', 'Мариновать мясо, нанизать на шампуры, жарить на гриле 15 минут.', 400, 20, 'Средне', TRUE),
(1, 'Мороженое', 'Домашнее мороженое', 'Смешать сливки, сахар, ваниль, заморозить, перемешивая каждые 30 минут.', 300, 120, 'Средне', TRUE),
(1, 'Салат с грибами', 'Салат с шампиньонами', 'Обжарить грибы, смешать с листьями салата, яйцами, заправить майонезом.', 200, 15, 'Легко', TRUE),
(1, 'Драники', 'Картофельные оладьи', 'Натереть картофель, смешать с яйцом, мукой. Жарить по 5 минут с каждой стороны.', 250, 20, 'Легко', TRUE),
(1, 'Винегрет', 'Овощной салат с свеклой', 'Отварить свеклу, картофель, морковь, нарезать с огурцами, заправить маслом.', 150, 20, 'Легко', TRUE),
(1, 'Торт Прага', 'Шоколадный торт с кремом', 'Выпечь бисквит, смазать шоколадным кремом, покрыть глазурью. Охладить.', 500, 90, 'Сложно', TRUE),
(1, 'Солянка', 'Мясной суп с оливками', 'Сварить бульон, добавить колбасу, огурцы, оливки, томаты. Варить 20 минут.', 300, 40, 'Средне', TRUE),
(1, 'Курица терияки', 'Курица в соусе терияки', 'Обжарить курицу, добавить соус терияки, тушить 10 минут. Подавать с рисом.', 350, 20, 'Легко', TRUE),
(1, 'Круассаны', 'Французская выпечка', 'Замесить слоеное тесто, сформировать круассаны, выпекать 20 минут.', 400, 60, 'Сложно', TRUE),
(1, 'Салат Нисуаз', 'Французский салат с тунцом', 'Смешать тунец, яйца, фасоль, картофель, оливки. Заправить оливковым маслом.', 250, 20, 'Легко', TRUE),
(1, 'Говядина Веллингтон', 'Говядина в тесте', 'Обжарить говядину, завернуть в грибы и тесто. Запечь 40 минут.', 600, 60, 'Сложно', TRUE),
(1, 'Торт Медовик', 'Торт с медовыми коржами', 'Выпечь медовые коржи, смазать сметанным кремом. Охладить 4 часа.', 450, 90, 'Сложно', TRUE),
(1, 'Суп Харчо', 'Грузинский суп с рисом', 'Сварить бульон, добавить рис, томаты, чеснок, специи. Варить 30 минут.', 300, 40, 'Средне', TRUE),
(1, 'Фаршированный перец', 'Перец с мясом и рисом', 'Начинить перец фаршем и рисом, тушить в томатном соусе 40 минут.', 350, 50, 'Средне', TRUE),
(1, 'Клафути', 'Французский десерт с вишней', 'Смешать муку, яйца, молоко, сахар. Выложить вишню, запечь 30 минут.', 250, 40, 'Легко', TRUE),
(1, 'Кесадилья', 'Мексиканская лепешка с сыром', 'Выложить сыр, курицу на тортилью, обжарить 5 минут. Подавать с сальсой.', 400, 15, 'Легко', TRUE),
(1, 'Баклажаны пармиджано', 'Баклажаны с сыром и томатами', 'Обжарить баклажаны, выложить слоями с томатным соусом и сыром. Запечь 30 минут.', 300, 40, 'Средне', TRUE),
(1, 'Смузи ягодный', 'Напиток с ягодами', 'Измельчить ягоды, банан, йогурт в блендере. Подавать охлажденным.', 150, 5, 'Легко', TRUE),
(1, 'Том Кха', 'Тайский суп с кокосовым молоком', 'Сварить бульон, добавить кокосовое молоко, курицу, грибы, лемонграсс. Варить 15 минут.', 250, 20, 'Средне', TRUE),
(1, 'Пирог с рыбой', 'Пирог с рыбной начинкой', 'Замесить тесто, начинить рыбой, рисом, луком. Выпекать 40 минут.', 400, 50, 'Средне', TRUE),
(1, 'Салат с печенью', 'Салат с говяжьей печенью', 'Обжарить печень, смешать с луком, морковью, заправить майонезом.', 300, 20, 'Легко', TRUE),
(1, 'Котлеты рыбные', 'Котлеты из рыбы', 'Измельчить рыбу, смешать с луком, яйцом, панировкой. Обжарить 10 минут.', 250, 20, 'Легко', TRUE),
(1, 'Торт Красный бархат', 'Торт с кремом', 'Выпечь красные коржи, смазать сливочным кремом. Охладить 4 часа.', 500, 90, 'Сложно', TRUE),
(1, 'Суп-пюре тыквенный', 'Кремовый суп из тыквы', 'Запечь тыкву, измельчить с бульоном, сливками. Варить 10 минут.', 200, 30, 'Легко', TRUE),
(1, 'Лобио', 'Грузинское блюдо из фасоли', 'Сварить фасоль, смешать с луком, чесноком, зеленью, специями.', 250, 40, 'Легко', TRUE),
(1, 'Пирог с мясом', 'Пирог с мясной начинкой', 'Замесить тесто, начинить фаршем, луком. Выпекать 40 минут.', 400, 50, 'Средне', TRUE),
(1, 'Салат с морепродуктами', 'Салат с креветками и кальмарами', 'Отварить морепродукты, смешать с листьями салата, заправить маслом.', 200, 15, 'Легко', TRUE),
(1, 'Курица карри', 'Курица в соусе карри', 'Обжарить курицу, добавить карри, кокосовое молоко, тушить 20 минут.', 350, 30, 'Средне', TRUE),
(1, 'Пирожное макарон', 'Французское пирожное', 'Выпечь миндальные коржи, наполнить кремом. Охладить 2 часа.', 300, 60, 'Сложно', TRUE),
(1, 'Суп с фрикадельками', 'Суп с мясными шариками', 'Сформировать фрикадельки, сварить с картофелем, морковью. Варить 20 минут.', 250, 30, 'Легко', TRUE),
(1, 'Шакшука', 'Яичное блюдо с томатами', 'Обжарить томаты, перец, лук, вбить яйца, готовить 10 минут.', 200, 15, 'Легко', TRUE),
(1, 'Пирог лимонный', 'Пирог с лимонным кремом', 'Выпечь песочное тесто, наполнить лимонным кремом, запечь 30 минут.', 350, 50, 'Средне', TRUE),
(1, 'Салат с рукколой', 'Салат с пармезаном', 'Смешать рукколу, пармезан, орехи, заправить оливковым маслом.', 200, 10, 'Легко', TRUE),
(1, 'Говядина по-бургундски', 'Говядина в вине', 'Тушить говядину с вином, луком, грибами 2 часа. Подавать с картофелем.', 500, 120, 'Сложно', TRUE),
(1, 'Торт Эстерхази', 'Торт с ореховыми коржами', 'Выпечь ореховые коржи, смазать кремом, покрыть глазурью. Охладить.', 450, 90, 'Сложно', TRUE);

-- Проверка полной вставки в Dishes
-- Removed unsupported DO block

-- Связь блюд с категориями (распределение 100 блюд)
INSERT INTO Dish_Categories (dish_id, category_id) VALUES
(1, 1), (6, 1), (11, 1), (17, 1), (26, 1), (30, 1), (35, 1), (42, 1), (57, 1), (64, 1), (70, 1), (74, 1), (79, 1), (85, 1), (92, 1), -- Супы (15)
(2, 2), (5, 2), (9, 2), (23, 2), (32, 2), (40, 2), (48, 2), (55, 2), (63, 2), (69, 2), (76, 2), (83, 2), (89, 2), (94, 2), (98, 2), -- Салаты (15)
(3, 3), (7, 3), (10, 3), (12, 3), (15, 3), (16, 3), (21, 3), (24, 3), (27, 3), (33, 3), (43, 3), (46, 3), (53, 3), (61, 3), (75, 3), -- Основные блюда (15)
(4, 4), (8, 4), (22, 4), (25, 4), (29, 4), (31, 4), (38, 4), (47, 4), (56, 4), (59, 4), (71, 4), (78, 4), (86, 4), (91, 4), (99, 4), -- Десерты (15)
(39, 5), (40, 5), (41, 5), (60, 5), (63, 5), (73, 5), (82, 5), (90, 5), (96, 5), (100, 5), -- Закуски (10)
(13, 6), (14, 6), (18, 6), (36, 6), (44, 6), (50, 6), (58, 6), (77, 6), (87, 6), (95, 6), -- Выпечка (10)
(51, 7), (52, 7), (84, 7), (88, 7), -- Напитки (4)
(19, 8), (20, 8), (28, 8), (34, 8), (62, 8), -- Гарниры (5)
(37, 9), (45, 9), (54, 9), -- Соусы (3)
(42, 10), (49, 10), (65, 10), (67, 10), (93, 10), (97, 10); -- Завтраки (6)

-- Связь блюд с ингредиентами (примеры для первых 10 блюд)
INSERT INTO Dish_Ingredients (dish_id, ingredient_id, quantity, unit_id) VALUES
(1, 8, 300, 1), (1, 9, 200, 1), (1, 10, 400, 1), (1, 15, 200, 1), -- Борщ: свекла, капуста, картофель, говядина
(2, 30, 100, 1), (2, 16, 200, 1), (2, 35, 50, 1), (2, 34, 30, 1), -- Салат Цезарь: листья салата, курица, крутоны, пармезан
(3, 20, 200, 1), (3, 33, 100, 1), (3, 34, 50, 1), (3, 6, 2, 1), -- Спагетти карбонара: паста, бекон, пармезан, яйца
(4, 36, 250, 1), (4, 37, 100, 1), (4, 38, 200, 1), (4, 39, 20, 1), -- Тирамису: маскарпоне, кофе, печенье савоярди, какао
(5, 10, 300, 1), (5, 23, 100, 1), (5, 28, 150, 1), (5, 29, 150, 1), -- Оливье: картофель, майонез, огурцы, помидоры
(6, 41, 200, 1), (6, 40, 100, 1), (6, 12, 50, 1), (6, 3, 5, 1), -- Грибной суп: грибы, сливки, лук, соль
(7, 45, 300, 1), (7, 15, 200, 1), (7, 3, 5, 1), (7, 12, 50, 1), -- Пельмени: тесто, говядина, соль, лук
(8, 36, 200, 1), (8, 4, 100, 1), (8, 2, 100, 1), (8, 6, 2, 1), -- Чизкейк: маскарпоне, масло сливочное, сахар, яйца
(9, 28, 150, 1), (9, 29, 150, 1), (9, 21, 100, 1), (9, 27, 50, 1), -- Греческий салат: огурцы, помидоры, сыр, зелень
(10, 45, 200, 1), (10, 15, 200, 1), (10, 21, 100, 1), (10, 14, 100, 1); -- Лазанья: тесто, говядина, сыр, томаты